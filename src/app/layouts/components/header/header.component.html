<nav
  class="navbar navbar-expand-sm navbar-light bg-light px-3 px-md-4 shadow-sm sticky-top"
>
  <div class="container-fluid">
    <!-- Brand -->
    <div class="w-25">
      <a
        class="navbar-brand fw-bold d-flex align-items-center"
        [routerLink]="['/']"
      >
        <i class="fa-solid fa-house me-2"></i> Rent Hub
      </a>
    </div>

    <!-- Toggler for mobile -->
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Collapsible Section -->
    <div class="collapse navbar-collapse justify-content-end gap-4" id="navbarSupportedContent">
      <!-- Search bar on homepage -->
      <div *ngIf="isHomePage()" class="w-50 my-2 my-lg-0 search-container">
        <div class="input-group">
          <span class="input-group-text bg-white border-end-0">
            <i class="fa-solid fa-magnifying-glass"></i>
          </span>
          <input
            type="text"
            [value]="searchService.searchTerm()"
            (input)="searchService.searchTerm.set($any($event.target).value)"
            class="form-control border-start-0"
            placeholder="Search properties..."
            aria-label="Search"
          />
        </div>
      </div>

      <!-- Right-aligned buttons -->
      <div
        class=" d-flex flex-column flex-sm-row align-items-start align-items-lg-center gap-2 mt-lg-0 justify-content-end right-button-container"
      >
        <ng-container *ngIf="!authService.isLoggedIn()">
          <app-button
            label="Login"
            variant="primary"
            [size]="'sm'"
            class="w-100"
            (clicked)="login()"
            [block]="true"
          ></app-button>
        </ng-container>

        <!-- Authenticated -->
        <ng-container *ngIf="authService.isLoggedIn()">
          <!-- Post Property (Landlord Only) -->
          <ng-container *ngIf="authService.isLandLord()">
            <app-button
              label="Post Property"
              variant="primary"
              [size]="'sm'"
              class="w-100"
              (clicked)="postProperty()"
                          [block]="true"
              icon="fa-solid fa-plus"
            ></app-button>
          </ng-container>

          <!-- User Dropdown -->
          <div ngbDropdown placement="bottom-end" class="dropdown col-12 col-sm-4 mt-2">
            <button
              class="btn btn-outline-secondary col-12"
              id="profileDropdown"
              ngbDropdownToggle
            >
              <i class="fas fa-user"></i>
            </button>
            <div
              ngbDropdownMenu
              aria-labelledby="profileDropdown"
              class="dropdown-menu-end col-12"
            >
              <div class="dropdown-item-text">
                <strong>{{ authService.currentUser()?.name }}</strong
                ><br />
                <small class="text-muted">{{
                  authService.currentUser()?.email
                }}</small>
              </div>
              <div class="dropdown-divider"></div>
              <app-button
                *ngIf="authService.isLandLord()"
                class="dropdown-item bg-transparent"
                variant="link"
                label="My Listings"
                (clicked)="navigateToMyListings()"
                [btnClasses]="['text-decoration-none']"
              >
                <i class="fas fa-list me-2"></i>
              </app-button>
              <app-button
                class="dropdown-item bg-transparent"
                variant="link"
                label="Logout"
                (clicked)="logout()"
                [btnClasses]="['text-decoration-none']"
              >
                <i class="fas fa-sign-out-alt me-2"></i>
              </app-button>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</nav>
