<div>
  <section class="p-3">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-5xl font-bold mb-4">Find Your Perfect Home</h1>
      <p class="text-xl text-muted-foreground mb-8 max-w-2xl mx-auto">
        Discover amazing apartments, connect with landlords, and find your next
        home with ease.
      </p>
    </div>
  </section>

  <div>
    <div class="text-center pt-4">
      <h2>Featured Properties</h2>
      <p>Handpicked premium listings just for you</p>
    </div>
    <div class="row p-3">
      <div *ngFor="let property of featuredProperties()" class="col-md-4 mb-4">
        <app-apartment-card
          [activeUser]="activeUser"
          [property]="property"
          (togglefavClick)="togglefavClick($event)"
          [favorites]="favorites()"
          (sendEnquiryClick)="sendEnquiry($event)"
          [amenitiesMap]="amenities"
        ></app-apartment-card>
      </div>
    </div>

    <!-- Toggle Button (Only for mobile) -->
    <div class="d-md-none text-end mb-2 px-2">
      <button
        class="btn btn-outline-primary btn-sm"
        type="button"
        (click)="showFilters = !showFilters"
      >
        <i class="fas fa-sliders-h me-1"></i> Filters
      </button>
    </div>

    <!-- Filter Box (collapsible on mobile) -->
    <div
      class="card p-3 shadow-sm mb-4"
      [ngClass]="{
        collapse: !showFilters,
        show: showFilters,
        'd-md-block': true
      }"
    >
      <h5 class="mb-3">Filter Properties</h5>

      <form (ngSubmit)="applyFilters()" class="row g-3">
        <!-- Furnished Filter -->
        <div class="col-12 col-md-4">
          <label class="form-label">Furnished</label>
          <select
            class="form-select"
            [(ngModel)]="filters.isFurnished"
            name="isFurnished"
          >
            <option [ngValue]="null">Any</option>
            <option [ngValue]="true">Furnished</option>
            <option [ngValue]="false">Unfurnished</option>
          </select>
        </div>

        <!-- Shared Filter -->
        <div class="col-12 col-md-4">
          <label class="form-label">Shared Property</label>
          <select
            class="form-select"
            [(ngModel)]="filters.isShared"
            name="isShared"
          >
            <option [ngValue]="null">Any</option>
            <option [ngValue]="true">Shared</option>
            <option [ngValue]="false">Not Shared</option>
          </select>
        </div>

        <!-- Property Type -->
        <div class="col-12 col-md-4">
          <label class="form-label">Property Type</label>
          <select class="form-select" [(ngModel)]="filters.type" name="type">
            <option [ngValue]="null">All Types</option>
            <option *ngFor="let t of propertyTypes" [value]="t.value">
              {{ t.label }}
            </option>
          </select>
        </div>

        <!-- Action Buttons -->
        <div class="col-12 text-end">
          <button type="submit" class="btn btn-primary btn-sm">
            <i class="fas fa-filter me-1"></i> Apply Filters
          </button>
          <button
            type="button"
            class="btn btn-outline-secondary btn-sm ms-2"
            (click)="clearFilters()"
          >
            <i class="fas fa-undo me-1"></i> Reset
          </button>
        </div>
      </form>
    </div>

    <div class="border-1 border-secondary rounded row p-3">
      <h2>{{ properties().length }} Properties Available</h2>
      <div *ngFor="let property of properties()" class="col-md-4 mb-4">
        <app-apartment-card
          [activeUser]="activeUser"
          [property]="property"
          (togglefavClick)="togglefavClick($event)"
          [favorites]="favorites()"
          (sendEnquiryClick)="sendEnquiry($event)"
          [amenitiesMap]="amenities"
        ></app-apartment-card>
      </div>
    </div>
  </div>
</div>
